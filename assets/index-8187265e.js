import{a as c,c as k,d as C,l as D,D as j,w as _,f as t,g as d,h as M,k as R,t as N,E as B,K as F,J as V,e as O,G as T,H as E,I as K,F as G}from"./index-813b923e.js";import{_ as U,a as I}from"./Modal-dd3e1065.js";import{c as $,_ as L}from"./DataTable-818c550b.js";import{_ as x}from"./FermentationInput-3b6fc92c.js";import{F as w}from"./FermentationSelect-64389b24.js";import{u as z}from"./useAlarm-80373309.js";import"./menu-2d4a16fe.js";import"./isSymbol-25f0a345.js";import"./multiselect-8ad1b07a.js";import"./plugin-vueexport-helper-c27b6911.js";const q=()=>{const g=[{label:"大於",value:"GT"},{label:"小於",value:"LT"}];return{conditionOption:g,findConditionName:i=>g.find(a=>a.value===i).label}},A={class:"row"},H={class:"col-lg-6 col-sm-12"},J={class:"col-lg-6 col-sm-12"},P={class:"col-lg-6 col-sm-12"},Q={class:"col-lg-6 col-sm-12"},W={class:"col-lg-6 col-sm-12"},X={class:"col-lg-6 col-sm-12"},Y={__name:"FormModal",setup(g,{expose:p}){const{conditionOption:i}=q(),a=c(null),u=c("create"),s=k(()=>{let v="";switch(u.value){case"create":v="新增警報資料";break;case"update":v="更新警報資料";break;case"view":v="檢視警報資料";break}return v}),r={deviceCategory:"",targetDevice:"",target:"",name:"",condition:"",threshold:0},b=["醱酵槽","離心機"],f=k(()=>e.value.deviceCategory=="醱酵槽"?["醱酵槽1"]:["離心機1"]),y=k(()=>e.value.targetDevice=="醱酵槽1"?["醱酵槽左","醱酵槽右"]:["離心機左","離心機右"]),h=()=>$(r),e=c(h()),l=k(()=>u.value=="view"),m=(v,o)=>{u.value=v,e.value=h(),o&&(e.value=$(o)),a.value.show()},S=()=>{a.value.hide()};return p({show:m}),(v,o)=>(C(),D(U,{ref_key:"modalRef",ref:a,"dialog-class":"modal-content-demo",title:s.value},j({default:_(()=>[t("div",A,[t("div",H,[d(x,{modelValue:e.value.name,"onUpdate:modelValue":o[0]||(o[0]=n=>e.value.name=n),label:"警報名稱",disabled:l.value,required:"",placeholder:"請輸入警報名稱"},null,8,["modelValue","disabled"])]),t("div",J,[d(w,{modelValue:e.value.deviceCategory,"onUpdate:modelValue":o[1]||(o[1]=n=>e.value.deviceCategory=n),onSelect:o[2]||(o[2]=()=>{e.value.targetDevice="",e.value.target=""}),label:"裝置分類",options:b,disabled:l.value,required:"",placeholder:"請選擇裝置分類"},null,8,["modelValue","disabled"])]),t("div",P,[d(w,{modelValue:e.value.targetDevice,"onUpdate:modelValue":o[3]||(o[3]=n=>e.value.targetDevice=n),label:"目標裝置",onSelect:o[4]||(o[4]=()=>e.value.target=""),options:f.value,disabled:l.value,required:"",placeholder:"請選擇目標裝置"},null,8,["modelValue","options","disabled"])]),t("div",Q,[d(w,{modelValue:e.value.target,"onUpdate:modelValue":o[5]||(o[5]=n=>e.value.target=n),label:"目標欄位",options:y.value,disabled:l.value,required:"",placeholder:"請選擇目標欄位"},null,8,["modelValue","options","disabled"])]),t("div",W,[d(w,{modelValue:e.value.condition,"onUpdate:modelValue":o[6]||(o[6]=n=>e.value.condition=n),label:"條件",options:M(i),disabled:l.value,required:"",placeholder:"請選擇條件"},null,8,["modelValue","options","disabled"])]),t("div",X,[d(x,{modelValue:e.value.threshold,"onUpdate:modelValue":o[7]||(o[7]=n=>e.value.threshold=n),label:"閥值",disabled:l.value,required:"",placeholder:"請輸入閥值"},null,8,["modelValue","disabled"])])])]),_:2},[l.value?void 0:{name:"footer",fn:_(()=>[t("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:o[8]||(o[8]=n=>a.value.hide())}," 取消 "),t("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:S}," 送出 ")]),key:"0"}]),1032,["title"]))}},Z={__name:"DeleteModal",setup(g,{expose:p}){const i=c(null),a=c("");return p({show:u=>{var s;a.value=u,(s=i.value)==null||s.show()}}),(u,s)=>(C(),D(U,{ref_key:"modalRef",ref:i,"body-class":"text-center","dialog-class":"modal-dialog-centered",title:"刪除警報"},{footer:_(()=>[t("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:s[0]||(s[0]=r=>i.value.hide())}," 取消 "),t("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:s[1]||(s[1]=r=>i.value.hide())}," 確定 ")]),default:_(()=>[R(" 確認是否刪除"+N(a.value)+" ",1)]),_:1},512))}},ee={class:"row row-sm"},te={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},le={class:"card custom-card"},oe={class:"card-header border-bottom-0 pb-0"},ae={class:"row"},se={class:"col-12"},ne={class:"d-flex flex-column flex-lg-row justify-content-between"},ie={class:"input-group wd-lg-25p"},de={class:"input-group-append"},re={class:"card-body"},ce=["onClick"],ue=t("i",{class:"fe fe-search"},null,-1),me=[ue],ve=["onClick"],pe=t("i",{class:"fe fe-edit-2"},null,-1),be=[pe],fe=["onClick"],_e=t("i",{class:"fe fe-trash"},null,-1),ge=[_e],he="警報設定",Ne={__name:"index",setup(g){const{alarms:p}=z(),{findConditionName:i}=q(),a=B({keyword:""}),u=[{label:"警報名稱",key:"name"},{label:"裝置分類",key:"deviceCategory"},{label:"目標裝置",key:"targetDevice"},{label:"目標欄位",key:"target"},{label:"條件",key:"condition"},{label:"閥值",key:"threshold"},{label:"操作",key:"action",tdClassName:"btn-list"}],s=c({total:10,size:10,page:1}),r=c([]);F(()=>{b()});const b=(h=1,e=10)=>{const l={...a,page:h,limit:e};V(l.keyword)?V(l.keyword)&&(r.value=p.value):r.value=r.value.filter(m=>m.name.includes(l.keyword)|m.target.includes(l.keyword)),s.value.total=r.value.length},f=c(null),y=c(null);return(h,e)=>(C(),O(G,null,[d(I,{title:he}),t("div",ee,[t("div",te,[t("div",le,[t("div",oe,[t("div",ae,[t("div",se,[t("div",ne,[t("button",{type:"button",class:"btn btn-primary mb-2 mb-lg-0",onClick:e[0]||(e[0]=l=>f.value.show("create"))},"新增警報"),t("div",ie,[T(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=l=>a.keyword=l),placeholder:"搜尋警報名稱、目標欄位",onKeyup:e[2]||(e[2]=K(l=>b(1),["enter"]))},null,544),[[E,a.keyword]]),t("span",de,[t("button",{class:"btn btn-primary",type:"button",onClick:e[3]||(e[3]=l=>b(1))}," 搜尋 ")])])])])])]),t("div",re,[d(L,{header:u,items:r.value,"page-change":b,pagination:s.value},{condition:_(({value:l})=>[R(N(M(i)(l)),1)]),action:_(({item:l})=>[t("button",{class:"btn btn-sm btn-primary",onClick:m=>f.value.show("view",l)},me,8,ce),t("button",{class:"btn btn-sm btn-danger",onClick:m=>f.value.show("update",l)},be,8,ve),t("button",{class:"btn btn-sm btn-info",onClick:m=>y.value.show(l.name)},ge,8,fe)]),_:1},8,["items","pagination"])])])]),d(Y,{ref_key:"formModalRef",ref:f},null,512),d(Z,{ref_key:"deleteModalRef",ref:y},null,512)])],64))}};export{Ne as default};
