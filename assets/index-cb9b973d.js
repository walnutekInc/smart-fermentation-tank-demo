import{a as r,y as q,b as F,d as y,e as w,f as e,k as Y,t as D,G as j,M as P,g as c,N as B,h as M,J as V,c as $,l as T,w as g,F as S,E as N,H as L,I as O}from"./index-1102438a.js";import{_ as x,a as A}from"./Modal-1038a473.js";import{c as H,_ as U}from"./DataTable-9dac8c0e.js";import{d as _}from"./dayjs.min-f5f9580c.js";import{_ as C}from"./FermentationInput-e0bba669.js";import{F as E}from"./FermentationSelect-9ade2976.js";import{u as I}from"./useAlarm-a74fdb61.js";import"./menu-0df00ab3.js";import"./isSymbol-65168823.js";import"./multiselect-91f0d309.js";import"./plugin-vueexport-helper-c27b6911.js";const K={class:"form-group"},z={class:"mg-b-10"},G={class:"text-danger"},J={class:"invalid-feedback"},R={__name:"FermentationDatePicker",props:{modelValue:[String,Array],error:String,label:String,required:Boolean},emits:["update:modelValue"],setup(f,{emit:p}){const i=f,a=r(i.modelValue);return q(()=>i.modelValue,s=>{a.value=s}),(s,t)=>{const m=F("Datepicker");return y(),w("div",K,[e("p",z,[Y(D(f.label)+" ",1),j(e("span",G,"*",512),[[P,f.required]])]),c(m,B({modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=b=>a.value=b)},s.$attrs,{class:{"is-invalid":!M(V)(f.error)}}),null,16,["modelValue","class"]),e("div",J,D(f.error),1)])}}},Q={class:"row"},W={class:"col-lg-6 col-sm-12"},X={class:"col-lg-6 col-sm-12"},Z={key:0,class:"col-12"},ee={class:"col-lg-6 col-sm-12"},te={class:"col-lg-6 col-sm-12"},ae={__name:"FormModal",setup(f,{expose:p}){const{alarms:i}=I(),a=r(null),s=r("create"),t=$(()=>{let d="";switch(s.value){case"create":d="新增專案資料";break;case"update":d="更新專案資料";break}return d}),m=$(()=>i.value.map(d=>d.targetDevice)),b={name:"",targetDevice:"",startTime:"",endTime:""},h=r([]),k=()=>H(b),o=r(k()),u=$(()=>_().isAfter(o.value.startTime));return p({show:(d,l)=>{s.value=d,o.value=k(),l&&(o.value=H(l)),h.value=[o.value.startTime,o.value.endTime],a.value.show()}}),(d,l)=>(y(),T(x,{ref_key:"modalRef",ref:a,"dialog-class":"modal-content-demo",title:t.value},{footer:g(()=>[e("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:l[5]||(l[5]=v=>a.value.hide())}," 取消 "),e("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:l[6]||(l[6]=v=>a.value.hide())}," 送出 ")]),default:g(()=>[e("div",Q,[e("div",W,[c(C,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=v=>o.value.name=v),label:"專案名稱",required:"",placeholder:"請輸入專案名稱"},null,8,["modelValue"])]),e("div",X,[c(E,{modelValue:o.value.targetDevice,"onUpdate:modelValue":l[1]||(l[1]=v=>o.value.targetDevice=v),options:m.value,label:"目標裝置",required:"",placeholder:"請輸入目標裝置"},null,8,["modelValue","options"])]),s.value==="create"||!u.value?(y(),w("div",Z,[c(R,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=v=>h.value=v),range:"",label:"起始時間-結束時間","min-date":M(_)(),placeholder:"請選擇起訖時間",format:"yyyy/MM/dd HH:mm",required:""},null,8,["modelValue","min-date"])])):(y(),w(S,{key:1},[e("div",ee,[c(C,{modelValue:o.value.startTime,"onUpdate:modelValue":l[3]||(l[3]=v=>o.value.startTime=v),label:"起始時間",disabled:""},null,8,["modelValue"])]),e("div",te,[c(R,{modelValue:o.value.endTime,"onUpdate:modelValue":l[4]||(l[4]=v=>o.value.endTime=v),"min-date":M(_)(),label:"結束時間",placeholder:"請選擇結束時間",format:"yyyy/MM/dd HH:mm",required:""},null,8,["modelValue","min-date"])])],64))])]),_:1},8,["title"]))}},le={__name:"LogsModal",setup(f,{expose:p}){const i=r(null),a=r("");p({show:m=>{a.value=m,i.value.show()}});const s=[{key:"item",label:"項目"},{key:"value",label:"數值"},{key:"unit",label:"單位"}],t=[{id:"1",item:"Time",value:"9/21/2023 17:51",unit:""},{id:"2",item:"Temp",value:"37.0",unit:"⸰C"},{id:"3",item:"Rpm (醱酵槽轉速)",value:"100",unit:"rpm"},{id:"4",item:"pH",value:"7.00",unit:""},{id:"5",item:"ORP",value:"-173",unit:"mV"},{id:"6",item:"CO2",value:"0",unit:"PPM"},{id:"7",item:"O2",value:"0",unit:"%"},{id:"8",item:"Lux",value:"0",unit:"lux"},{id:"9",item:"Pump flow 1~6",value:"0",unit:"L"},{id:"10",item:"RH",value:"0",unit:"%"}];return(m,b)=>(y(),T(x,{ref_key:"modalRef",ref:i,title:a.value,"dialog-class":"modal-lg"},{default:g(()=>[c(U,{header:s,items:t})]),_:1},8,["title"]))}},oe={__name:"DeleteModal",setup(f,{expose:p}){const i=r(null),a=r("");return p({show:s=>{var t;a.value=s,(t=i.value)==null||t.show()}}),(s,t)=>(y(),T(x,{ref_key:"modalRef",ref:i,"body-class":"text-center","dialog-class":"modal-dialog-centered",title:"刪除專案"},{footer:g(()=>[e("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:t[0]||(t[0]=m=>i.value.hide())}," 取消 "),e("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:t[1]||(t[1]=m=>i.value.hide())}," 確定 ")]),default:g(()=>[Y(" 確認是否刪除"+D(a.value)+" ",1)]),_:1},512))}},se={class:"row row-sm"},ne={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},ie={class:"card custom-card"},de={class:"card-header border-bottom-0 pb-0"},re={class:"row"},me={class:"col-12"},ue={class:"d-flex flex-column flex-lg-row justify-content-between"},ce={class:"input-group wd-lg-25p"},ve={class:"input-group-append"},pe={class:"card-body"},fe=["onClick"],_e=e("i",{class:"fe fe-edit-2"},null,-1),be=[_e],ye=["onClick"],ge=e("i",{class:"mdi mdi-database"},null,-1),he=[ge],ke=["onClick"],we=e("i",{class:"fe fe-trash"},null,-1),De=[we],$e="專案管理",qe={__name:"index",setup(f){const p=N({keyword:""}),i=[{label:"專案名稱",key:"name"},{label:"目標裝置",key:"targetDevice"},{label:"起始時間",key:"startTime"},{label:"結束時間",key:"endTime"},{label:"操作",key:"action",tdClassName:"btn-list"}],a=r({total:10,size:10,page:1}),s=[{id:"1",name:"紀錄1",targetDevice:"醱酵槽1",startTime:_().subtract(1,"day").format("YYYY/MM/DD HH:mm"),endTime:_().add(2,"day").format("YYYY/MM/DD HH:mm")},{id:"2",name:"紀錄2",targetDevice:"離心機1",startTime:_().format("YYYY/MM/DD HH:mm"),endTime:_().add(2,"day").format("YYYY/MM/DD HH:mm")},{id:"2",name:"紀錄2",targetDevice:"離心機1",startTime:_().add(1,"day").format("YYYY/MM/DD HH:mm"),endTime:_().add(2,"day").format("YYYY/MM/DD HH:mm")}],t=r(s),m=(o=1,u=10)=>{const n={...p,page:o,limit:u};V(n.keyword)?V(n.keyword)&&(t.value=s):t.value=t.value.filter(d=>d.name.includes(n.keyword)|d.targetDevice),a.value.total=t.value.length},b=r(null),h=r(null),k=r(null);return(o,u)=>(y(),w(S,null,[c(A,{title:$e}),e("div",se,[e("div",ne,[e("div",ie,[e("div",de,[e("div",re,[e("div",me,[e("div",ue,[e("button",{type:"button",class:"btn btn-primary mb-2 mb-lg-0",onClick:u[0]||(u[0]=n=>b.value.show("create"))},"新增專案"),e("div",ce,[j(e("input",{type:"text",class:"form-control","onUpdate:modelValue":u[1]||(u[1]=n=>p.keyword=n),placeholder:"搜尋專案名稱、裝置",onKeyup:u[2]||(u[2]=O(n=>m(1),["enter"]))},null,544),[[L,p.keyword]]),e("span",ve,[e("button",{class:"btn btn-primary",type:"button",onClick:u[3]||(u[3]=n=>m(1))}," 搜尋 ")])])])])])]),e("div",pe,[c(U,{header:i,items:t.value,"page-change":m,pagination:a.value},{laboratory:g(({value:n})=>[Y(D(n.join("、")),1)]),action:g(({item:n})=>[e("button",{class:"btn btn-sm btn-danger",onClick:d=>b.value.show("update",n)},be,8,fe),e("button",{class:"btn btn-sm btn-primary",onClick:d=>k.value.show(n.name)},he,8,ye),e("button",{class:"btn btn-sm btn-info",onClick:d=>h.value.show(n.name)},De,8,ke)]),_:1},8,["items","pagination"])])])]),c(ae,{ref_key:"formModalRef",ref:b},null,512),c(le,{ref_key:"logsModalRef",ref:k},null,512),c(oe,{ref_key:"deleteModalRef",ref:h},null,512)])],64))}};export{qe as default};
