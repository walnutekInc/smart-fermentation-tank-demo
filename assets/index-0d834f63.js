import{y as u,c as k,e as g,m as x,E as T,w as f,g as e,h as v,j as V,l as R,t as D,G as j,f as B,H as F,I as U,J as q,F as E,K as y}from"./index-29d56d19.js";import{_ as G}from"./Pageheader-d386a2e3.js";import{_ as w,a as M,c as $,b as K}from"./FermentationInput-af432dbe.js";import{F as C}from"./FermentationSelect-97650bbc.js";import"./menu-833b8642.js";import"./multiselect-a08102bf.js";import"./plugin-vueexport-helper-c27b6911.js";const N=()=>{const _=[{label:"大於",value:"GT"},{label:"小於",value:"LT"}];return{conditionOption:_,findConditionName:n=>_.find(a=>a.value===n).label}},L={class:"row"},O={class:"col-lg-6 col-sm-12"},S={class:"col-lg-6 col-sm-12"},A={class:"col-lg-6 col-sm-12"},I={class:"col-lg-6 col-sm-12"},z={__name:"FormModal",setup(_,{expose:b}){const{conditionOption:n}=N(),a=u(null),d=u("create"),s=k(()=>{let t="";switch(d.value){case"create":t="新增警報資料";break;case"update":t="更新警報資料";break;case"view":t="檢視警報資料";break}return t}),r={target:"",name:"",condition:"",threshold:0},h=["醱酵槽A","醱酵槽B"],p=()=>$(r),l=u(p()),m=k(()=>d.value=="view");return b({show:(t,o)=>{d.value=t,l.value=p(),o&&(l.value=$(o)),a.value.show()}}),(t,o)=>(g(),x(M,{ref_key:"modalRef",ref:a,"dialog-class":"modal-content-demo",title:s.value},T({default:f(()=>[e("div",L,[e("div",O,[v(w,{modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=c=>l.value.name=c),label:"警報名稱",disabled:m.value,required:"",placeholder:"請輸入警報名稱"},null,8,["modelValue","disabled"])]),e("div",S,[v(C,{modelValue:l.value.target,"onUpdate:modelValue":o[1]||(o[1]=c=>l.value.target=c),label:"目標欄位",options:h,disabled:m.value,required:"",placeholder:"請選擇目標欄位"},null,8,["modelValue","disabled"])]),e("div",A,[v(C,{modelValue:l.value.condition,"onUpdate:modelValue":o[2]||(o[2]=c=>l.value.condition=c),label:"條件",options:V(n),disabled:m.value,required:"",placeholder:"請選擇條件"},null,8,["modelValue","options","disabled"])]),e("div",I,[v(w,{modelValue:l.value.threshold,"onUpdate:modelValue":o[3]||(o[3]=c=>l.value.threshold=c),label:"閥值",disabled:m.value,required:"",placeholder:"請輸入閥值"},null,8,["modelValue","disabled"])])])]),_:2},[m.value?void 0:{name:"footer",fn:f(()=>[e("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:o[4]||(o[4]=c=>a.value.hide())}," 取消 "),e("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:o[5]||(o[5]=c=>a.value.hide())}," 送出 ")]),key:"0"}]),1032,["title"]))}},H={__name:"DeleteModal",setup(_,{expose:b}){const n=u(null),a=u("");return b({show:d=>{var s;a.value=d,(s=n.value)==null||s.show()}}),(d,s)=>(g(),x(M,{ref_key:"modalRef",ref:n,"body-class":"text-center","dialog-class":"modal-dialog-centered",title:"刪除警報"},{footer:f(()=>[e("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:s[0]||(s[0]=r=>n.value.hide())}," 取消 "),e("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:s[1]||(s[1]=r=>n.value.hide())}," 確定 ")]),default:f(()=>[R(" 確認是否刪除"+D(a.value)+" ",1)]),_:1},512))}},J={class:"row row-sm"},P={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},Q={class:"card custom-card"},W={class:"card-header border-bottom-0 pb-0"},X={class:"row"},Y={class:"col-12"},Z={class:"d-flex flex-column flex-lg-row justify-content-between"},ee={class:"input-group wd-lg-25p"},te={class:"input-group-append"},oe={class:"card-body"},le=["onClick"],ne=e("i",{class:"fe fe-search"},null,-1),se=[ne],ae=["onClick"],ie=e("i",{class:"fe fe-edit-2"},null,-1),de=[ie],re=["onClick"],ce=e("i",{class:"fe fe-trash"},null,-1),ue=[ce],me="警報管理",ke={__name:"index",setup(_){const{findConditionName:b}=N(),n=j({keyword:""}),a=[{label:"警報名稱",key:"name"},{label:"目標欄位",key:"target"},{label:"條件",key:"condition"},{label:"閥值",key:"threshold"},{label:"操作",key:"action",tdClassName:"btn-list"}],d=u({total:10,size:10,page:1}),s=[{id:"1",target:"醱酵槽A",name:"警報1",condition:"GT",threshold:10},{id:"2",target:"醱酵槽B",name:"警報2",condition:"LT",threshold:20}],r=u(s),h=(m=1,i=10)=>{const t={...n,page:m,limit:i};y(t.keyword)?y(t.keyword)&&(r.value=s):r.value=r.value.filter(o=>o.name.includes(t.keyword)|o.target.includes(t.keyword)),d.value.total=r.value.length},p=u(null),l=u(null);return(m,i)=>(g(),B(E,null,[v(G,{title:me}),e("div",J,[e("div",P,[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("button",{type:"button",class:"btn btn-primary",onClick:i[0]||(i[0]=t=>p.value.show("create"))},"新增警報"),e("div",ee,[F(e("input",{type:"text",class:"form-control","onUpdate:modelValue":i[1]||(i[1]=t=>n.keyword=t),placeholder:"搜尋警報名稱、目標欄位",onKeyup:i[2]||(i[2]=q(t=>h(1),["enter"]))},null,544),[[U,n.keyword]]),e("span",te,[e("button",{class:"btn btn-primary",type:"button",onClick:i[3]||(i[3]=t=>h(1))}," 搜尋 ")])])])])])]),e("div",oe,[v(K,{header:a,items:r.value,"page-change":h,pagination:d.value},{condition:f(({value:t})=>[R(D(V(b)(t)),1)]),action:f(({item:t})=>[e("button",{class:"btn btn-sm btn-primary",onClick:o=>p.value.show("view",t)},se,8,le),e("button",{class:"btn btn-sm btn-danger",onClick:o=>p.value.show("update",t)},de,8,ae),e("button",{class:"btn btn-sm btn-info",onClick:o=>l.value.show(t.name)},ue,8,re)]),_:1},8,["items","pagination"])])])]),v(z,{ref_key:"formModalRef",ref:p},null,512),v(H,{ref_key:"deleteModalRef",ref:l},null,512)])],64))}};export{ke as default};
