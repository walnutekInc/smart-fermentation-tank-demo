import{b as c,e as m,n as $,E as D,w as b,h as e,f as p,j as _,F as y,m as x,G as R,L as A,K as w,H as g,M,I as B,J as j,t as N}from"./index-9e5ab6d3.js";import{a as C,_ as T,b as U}from"./Modal-2620e7a0.js";import{u as E}from"./useAlarm-7139467f.js";import{_ as V}from"./FermentationTextArea-0573d51a.js";import{c as k}from"./cloneDeep-de3c8627.js";import"./menu-1695bb5b.js";const I={key:0,class:"row"},K={class:"col-lg-12"},L={__name:"ClearAlarmModal",setup(h,{expose:f}){const l=c(null),v={comment:""},d=()=>k(v),o=c(d()),a=c(!1);return f({show:i=>{o.value=d(),a.value=i,l.value.show()}}),(i,n)=>(m(),$(C,{ref_key:"modalRef",ref:l,"dialog-class":"modal-content-demo","body-class":a.value?"":"text-center",title:a.value?"解除警報並評論":"解除警報"},D({default:b(()=>[a.value?(m(),p("div",I,[e("div",K,[_(V,{modelValue:o.value.comment,"onUpdate:modelValue":n[0]||(n[0]=t=>o.value.comment=t),label:"解除警報評論",placeholder:"請填寫解決或警報發生原因",rows:10},null,8,["modelValue"])])])):(m(),p(y,{key:1},[x(" 是否解除警報? ")],64))]),_:2},[i.isDisabled?void 0:{name:"footer",fn:b(()=>[e("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:n[1]||(n[1]=t=>l.value.hide())}," 取消 "),e("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:n[2]||(n[2]=t=>l.value.hide())}," 解除警報 ")]),key:"0"}]),1032,["body-class","title"]))}},F={class:"row"},S={class:"col-lg-12"},z={__name:"ViewAlarmComment",setup(h,{expose:f}){const l=c(null),v={comment:""},d=()=>k(v),o=c(d());return f({show:u=>{o.value=d(),u&&(o.value=k(u)),l.value.show()}}),(u,i)=>(m(),$(C,{ref_key:"modalRef",ref:l,"dialog-class":"modal-content-demo",title:"檢視解除警報發生原因"},{default:b(()=>[e("div",F,[e("div",S,[_(V,{readonly:"",modelValue:o.value.comment,"onUpdate:modelValue":i[0]||(i[0]=n=>o.value.comment=n),placeholder:"請填寫解決或警報發生原因",rows:10},null,8,["modelValue"])])])]),_:1},512))}},G={class:"row row-sm"},H={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},J={class:"card custom-card"},q={class:"card-header border-bottom-0 pb-0"},O={class:"row"},P={class:"col-12"},Q={class:"d-flex justify-content-end align-items-center"},W={class:"ckbox me-2"},X=e("span",null,"顯示未解除警報",-1),Y={class:"input-group wd-lg-25p"},Z={class:"input-group-append"},ee={class:"card-body"},te=e("i",{class:"fe fe-minus-circle"},null,-1),se=[te],oe=e("i",{class:"fa fa-commenting"},null,-1),le=[oe],ae=["onClick"],ne=e("i",{class:"fe fe-search"},null,-1),ie=[ne],re="警報紀錄",ve={__name:"index",setup(h){const{alarmLogs:f}=E(),l=R({keyword:"",status:!1}),v=[{label:"警報名稱",key:"name"},{label:"目標裝置",key:"targetDevice"},{label:"實驗室",key:"laboratory"},{label:"目標欄位",key:"target"},{label:"警報狀態",key:"status"},{label:"操作",key:"action",tdClassName:"btn-list"}],d=c({total:10,size:10,page:1}),o=c(f.value);A(()=>{a()});const a=(n=1,t=10)=>{const s={...l,page:n,limit:t};w(s.keyword)?w(s.keyword)&&(o.value=f.value.filter(r=>s.status===!1?r.status===s.status:r)):o.value=o.value.filter(r=>r.name.includes(s.keyword)|r.target.includes(s.keyword)|s.status===!1?r.status===s.status:r),d.value.total=o.value.length},u=c(null),i=c(null);return(n,t)=>(m(),p(y,null,[_(U,{title:re}),e("div",G,[e("div",H,[e("div",J,[e("div",q,[e("div",O,[e("div",P,[e("div",Q,[e("label",W,[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.status=s),"true-value":!1,"false-value":!0,onChange:t[1]||(t[1]=s=>a(1)),type:"checkbox"},null,544),[[M,l.status]]),X]),e("div",Y,[g(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=s=>l.keyword=s),placeholder:"搜尋警報名稱、目標欄位",onKeyup:t[3]||(t[3]=j(s=>a(1),["enter"]))},null,544),[[B,l.keyword]]),e("span",Z,[e("button",{class:"btn btn-primary",type:"button",onClick:t[4]||(t[4]=s=>a(1))}," 搜尋 ")])])])])])]),e("div",ee,[_(T,{header:v,items:o.value,"page-change":a,pagination:d.value},{status:b(({value:s})=>[x(N(s?"已解除":"未解除"),1)]),action:b(({item:s})=>[s.status?(m(),p("button",{key:1,class:"btn btn-sm btn-primary",onClick:r=>u.value.show(s)},ie,8,ae)):(m(),p(y,{key:0},[e("button",{class:"btn btn-sm btn-danger",title:"解除警報",onClick:t[5]||(t[5]=r=>i.value.show(!1))},se),e("button",{class:"btn btn-sm btn-info",onClick:t[6]||(t[6]=r=>i.value.show(!0))},le)],64))]),_:1},8,["items","pagination"])])])]),_(L,{ref_key:"clearAlarmModalRef",ref:i},null,512),_(z,{ref_key:"viewAlarmCommentRef",ref:u},null,512)])],64))}};export{ve as default};
