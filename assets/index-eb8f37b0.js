import{a as i,y as T,b as H,d as g,e as w,f as e,k as D,t as y,G as Y,M as S,g as m,N as j,h as F,J as $,c as M,l as V,w as _,E as N,H as P,I as q,F as B,j as U}from"./index-46a54e1d.js";import{_ as x,a as L}from"./Modal-4cf0ae13.js";import{c as C,_ as R}from"./DataTable-e92e859a.js";import{d as k}from"./dayjs.min-ab5d7b35.js";import{_ as O}from"./FermentationInput-f93230b0.js";import{F as E}from"./FermentationSelect-e4e48704.js";import{u as A}from"./useAlarm-99c9cfa8.js";import"./menu-ebf7793b.js";import"./isSymbol-7225f9e5.js";import"./multiselect-6a23b288.js";import"./plugin-vueexport-helper-c27b6911.js";const I={class:"form-group"},K={class:"mg-b-10"},z={class:"text-danger"},G={class:"invalid-feedback"},J={__name:"FermentationDatePicker",props:{modelValue:[String,Array],error:String,label:String,required:Boolean},emits:["update:modelValue"],setup(v,{emit:u}){const s=v,o=i(s.modelValue);return T(()=>s.modelValue,n=>{o.value=n}),(n,a)=>{const r=H("Datepicker");return g(),w("div",I,[e("p",K,[D(y(v.label)+" ",1),Y(e("span",z,"*",512),[[S,v.required]])]),m(r,j({modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=p=>o.value=p)},n.$attrs,{class:{"is-invalid":!F($)(v.error)}}),null,16,["modelValue","class"]),e("div",G,y(v.error),1)])}}},Q={class:"row"},W={class:"col-lg-6 col-sm-12"},X={class:"col-lg-6 col-sm-12"},Z={class:"col-12"},ee={__name:"FormModal",setup(v,{expose:u}){const{alarms:s}=A(),o=i(null),n=i("create"),a=M(()=>{let t="";switch(n.value){case"create":t="新增專案資料";break;case"update":t="更新專案資料";break}return t}),r=M(()=>s.value.map(t=>t.targetDevice)),p={name:"",targetDevice:"",startTime:"",endTime:""},b=i([]),h=()=>C(p),d=i(h());return u({show:(t,l)=>{n.value=t,d.value=h(),l&&(d.value=C(l)),b.value=[d.value.startTime,d.value.endTime],o.value.show()}}),(t,l)=>(g(),V(x,{ref_key:"modalRef",ref:o,"dialog-class":"modal-content-demo",title:a.value},{footer:_(()=>[e("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:l[3]||(l[3]=f=>o.value.hide())}," 取消 "),e("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:l[4]||(l[4]=f=>o.value.hide())}," 送出 ")]),default:_(()=>[e("div",Q,[e("div",W,[m(O,{modelValue:d.value.name,"onUpdate:modelValue":l[0]||(l[0]=f=>d.value.name=f),label:"專案名稱",required:"",placeholder:"請輸入專案名稱"},null,8,["modelValue"])]),e("div",X,[m(E,{modelValue:d.value.targetDevice,"onUpdate:modelValue":l[1]||(l[1]=f=>d.value.targetDevice=f),options:r.value,label:"目標裝置",required:"",placeholder:"請輸入目標裝置"},null,8,["modelValue","options"])]),e("div",Z,[m(J,{modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=f=>b.value=f),range:"",label:"起迄時間",placeholder:"請選擇起訖時間",required:""},null,8,["modelValue"])])])]),_:1},8,["title"]))}},te={__name:"LogsModal",setup(v,{expose:u}){const s=i(null),o=i("");u({show:r=>{o.value=r,s.value.show()}});const n=[{key:"item",label:"項目"},{key:"value",label:"數值"},{key:"unit",label:"單位"}],a=[{id:"1",item:"Time",value:"9/21/2023 17:51",unit:""},{id:"2",item:"Temp",value:"37.0",unit:"⸰C"},{id:"3",item:"Rpm (醱酵槽轉速)",value:"100",unit:"rpm"},{id:"4",item:"pH",value:"7.00",unit:""},{id:"5",item:"ORP",value:"-173",unit:"mV"},{id:"6",item:"CO2",value:"0",unit:"PPM"},{id:"7",item:"O2",value:"0",unit:"%"},{id:"8",item:"Lux",value:"0",unit:"lux"},{id:"9",item:"Pump flow 1~6",value:"0",unit:"L"},{id:"10",item:"RH",value:"0",unit:"%"}];return(r,p)=>(g(),V(x,{ref_key:"modalRef",ref:s,title:o.value,"dialog-class":"modal-lg"},{default:_(()=>[m(R,{header:n,items:a})]),_:1},8,["title"]))}},ae={__name:"DeleteModal",setup(v,{expose:u}){const s=i(null),o=i("");return u({show:n=>{var a;o.value=n,(a=s.value)==null||a.show()}}),(n,a)=>(g(),V(x,{ref_key:"modalRef",ref:s,"body-class":"text-center","dialog-class":"modal-dialog-centered",title:"刪除專案"},{footer:_(()=>[e("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:a[0]||(a[0]=r=>s.value.hide())}," 取消 "),e("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:a[1]||(a[1]=r=>s.value.hide())}," 確定 ")]),default:_(()=>[D(" 確認是否刪除"+y(o.value)+" ",1)]),_:1},512))}},le={class:"row row-sm"},oe={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},se={class:"card custom-card"},ne={class:"card-header border-bottom-0 pb-0"},ie={class:"row"},re={class:"col-12"},de={class:"d-flex flex-column flex-lg-row justify-content-between"},ce={class:"input-group wd-lg-25p"},ue={class:"input-group-append"},me={class:"card-body"},ve=["onClick"],pe=e("i",{class:"fe fe-edit-2"},null,-1),fe=[pe],_e=["onClick"],be=e("i",{class:"mdi mdi-database"},null,-1),ge=[be],he=["onClick"],ke=e("i",{class:"fe fe-trash"},null,-1),ye=[ke],we="專案管理",je={__name:"index",setup(v){const u=N({keyword:""}),s=[{label:"專案名稱",key:"name"},{label:"目標裝置",key:"targetDevice"},{label:"起始時間",key:"startTime"},{label:"結束時間",key:"endTime"},{label:"操作",key:"action",tdClassName:"btn-list"}],o=i({total:10,size:10,page:1}),n=[{id:"1",name:"紀錄1",targetDevice:"醱酵槽1",startTime:k().subtract(1,"day").format("YYYY/MM/DD HH:mm"),endTime:k().add(2,"day").format("YYYY/MM/DD HH:mm"),isStart:!0},{id:"2",name:"紀錄2",targetDevice:"離心機1",startTime:k().format("YYYY/MM/DD HH:mm"),endTime:k().add(2,"day").format("YYYY/MM/DD HH:mm"),isStart:!1}],a=i(n),r=(d=1,c=10)=>{const t={...u,page:d,limit:c};$(t.keyword)?$(t.keyword)&&(a.value=n):a.value=a.value.filter(l=>l.name.includes(t.keyword)|l.targetDevice),o.value.total=a.value.length},p=i(null),b=i(null),h=i(null);return(d,c)=>(g(),w(B,null,[m(L,{title:we}),e("div",le,[e("div",oe,[e("div",se,[e("div",ne,[e("div",ie,[e("div",re,[e("div",de,[e("button",{type:"button",class:"btn btn-primary mb-2 mb-lg-0",onClick:c[0]||(c[0]=t=>p.value.show("create"))},"新增專案"),e("div",ce,[Y(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c[1]||(c[1]=t=>u.keyword=t),placeholder:"搜尋專案名稱、裝置",onKeyup:c[2]||(c[2]=q(t=>r(1),["enter"]))},null,544),[[P,u.keyword]]),e("span",ue,[e("button",{class:"btn btn-primary",type:"button",onClick:c[3]||(c[3]=t=>r(1))}," 搜尋 ")])])])])])]),e("div",me,[m(R,{header:s,items:a.value,"page-change":r,pagination:o.value},{laboratory:_(({value:t})=>[D(y(t.join("、")),1)]),action:_(({item:t})=>[t.isStart?U("",!0):(g(),w("button",{key:0,class:"btn btn-sm btn-danger",onClick:l=>p.value.show("update",t)},fe,8,ve)),e("button",{class:"btn btn-sm btn-primary",onClick:l=>h.value.show(t.name)},ge,8,_e),e("button",{class:"btn btn-sm btn-info",onClick:l=>b.value.show(t.name)},ye,8,he)]),_:1},8,["items","pagination"])])])]),m(ee,{ref_key:"formModalRef",ref:p},null,512),m(te,{ref_key:"logsModalRef",ref:h},null,512),m(ae,{ref_key:"deleteModalRef",ref:b},null,512)])],64))}};export{je as default};
