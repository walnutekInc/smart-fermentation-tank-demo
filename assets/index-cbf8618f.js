import{a as r,c as g,d as h,l as y,D as V,w as b,f as e,g as u,k as D,t as j,E as B,K as E,J as $,e as N,G as F,H as K,I as S,F as T}from"./index-813b923e.js";import{_ as w,a as U}from"./Modal-dd3e1065.js";import{c as x,_ as C}from"./DataTable-818c550b.js";import{_ as I}from"./FermentationInput-3b6fc92c.js";import{_ as L}from"./FermentationTextArea-9ceae27c.js";import{u as q,a as z}from"./useLaborator-d0350260.js";import"./menu-2d4a16fe.js";import"./isSymbol-25f0a345.js";const G={class:"row"},H={class:"col-lg-12 col-sm-12"},J={class:"col-lg-12 col-sm-12"},A={__name:"FormModal",setup(k,{expose:m}){const s=r(null),n=r("create"),d=g(()=>{let c="";switch(n.value){case"create":c="新增實驗室資料";break;case"update":c="更新實驗室資料";break}return c}),a={name:"",note:""},l=()=>x(a),i=r(l()),_=g(()=>n.value=="view"),v=(c,t)=>{n.value=c,i.value=l(),t&&(i.value=x(t)),s.value.show()},p=()=>{s.value.hide()};return m({show:v}),(c,t)=>(h(),y(w,{ref_key:"modalRef",ref:s,"dialog-class":"modal-content-demo",title:d.value},V({default:b(()=>[e("div",G,[e("div",H,[u(I,{modelValue:i.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>i.value.name=o),label:"實驗室名稱",disabled:_.value,required:"",placeholder:"請輸入實驗室名稱"},null,8,["modelValue","disabled"])]),e("div",J,[u(L,{modelValue:i.value.note,"onUpdate:modelValue":t[1]||(t[1]=o=>i.value.note=o),label:"備註",disabled:_.value,placeholder:"請輸入備註"},null,8,["modelValue","disabled"])])])]),_:2},[_.value?void 0:{name:"footer",fn:b(()=>[e("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:t[2]||(t[2]=o=>s.value.hide())}," 取消 "),e("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:p}," 送出 ")]),key:"0"}]),1032,["title"]))}},O={__name:"ViewMemberModal",setup(k,{expose:m}){const s=r(null),n=[{label:"使用者名稱",key:"name"},{label:"Email",key:"email"}],d=r([]);return m({show:l=>{d.value=l.members,s.value.show()}}),(l,i)=>(h(),y(w,{ref_key:"modalRef",ref:s,title:"實驗室人員清單"},{default:b(()=>[u(C,{header:n,items:d.value},null,8,["items"])]),_:1},512))}},P={__name:"DeleteModal",setup(k,{expose:m}){const s=r(null),n=r("");return m({show:d=>{var a;n.value=d,(a=s.value)==null||a.show()}}),(d,a)=>(h(),y(w,{ref_key:"modalRef",ref:s,"body-class":"text-center","dialog-class":"modal-dialog-centered",title:"刪除實驗室"},{footer:b(()=>[e("button",{href:"javascript:;",class:"btn btn-md btn-info",onClick:a[0]||(a[0]=l=>s.value.hide())}," 取消 "),e("button",{href:"javascript:;",class:"btn btn-md btn-danger",onClick:a[1]||(a[1]=l=>s.value.hide())}," 確定 ")]),default:b(()=>[D(" 確認是否刪除"+j(n.value)+" ",1)]),_:1},512))}},Q={class:"row row-sm"},W={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 grid-margin"},X={class:"card custom-card"},Y={class:"card-header border-bottom-0 pb-0"},Z={class:"row"},ee={class:"col-12"},te={class:"d-flex flex-column flex-lg-row justify-content-between"},oe={class:"input-group wd-lg-25p"},se={class:"input-group-append"},ae={class:"card-body"},le=["onClick"],ne=e("i",{class:"fe fe-search"},null,-1),ie=[ne],re=["onClick"],de=e("i",{class:"fe fe-edit-2"},null,-1),ce=[de],ue=["onClick"],me=e("i",{class:"fe fe-trash"},null,-1),_e=[me],fe="實驗室管理",$e={__name:"index",setup(k){const{members:m}=q(),{laborators:s}=z(),n=B({keyword:""}),d=[{label:"實驗室名稱",key:"name"},{label:"備註",key:"note"},{label:"操作",key:"action",tdClassName:"btn-list"}];E(()=>{i()});const a=r({total:10,size:10,page:1}),l=r([]),i=async(c=1,t=10)=>{const o={...n,page:c,limit:t};$(o.keyword)?$(o.keyword)&&(l.value=s.value.map(f=>{const M=m.value.filter(R=>R.laboratory.includes(f.name));return{...f,members:M}})):l.value=l.value.filter(f=>f.name.includes(o.keyword)),a.value.total=l.value.length},_=r(null),v=r(null),p=r(null);return(c,t)=>(h(),N(T,null,[u(U,{title:fe}),e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("button",{type:"button",class:"btn btn-primary mb-2 mb-lg-0",onClick:t[0]||(t[0]=o=>_.value.show("create"))},"新增實驗室"),e("div",oe,[F(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=o=>n.keyword=o),placeholder:"搜尋實驗室名稱",onKeyup:t[2]||(t[2]=S(o=>i(1),["enter"]))},null,544),[[K,n.keyword]]),e("span",se,[e("button",{class:"btn btn-primary",type:"button",onClick:t[3]||(t[3]=o=>i(1))}," 搜尋 ")])])])])])]),e("div",ae,[u(C,{header:d,items:l.value,"page-change":i,pagination:a.value},{action:b(({item:o})=>[e("button",{class:"btn btn-sm btn-primary",onClick:f=>p.value.show(o)},ie,8,le),e("button",{class:"btn btn-sm btn-danger",onClick:f=>_.value.show("update",o)},ce,8,re),e("button",{class:"btn btn-sm btn-info",onClick:f=>v.value.show(o.name)},_e,8,ue)]),_:1},8,["items","pagination"])])])]),u(A,{ref_key:"formModalRef",ref:_},null,512),u(O,{ref_key:"viewModalRef",ref:p},null,512),u(P,{ref_key:"deleteModalRef",ref:v},null,512)])],64))}};export{$e as default};
