import{c as h,z as c,ac as o}from"./index-29d56d19.js";const d={itemList:[{name:"Dashboard",title:"Dashboard"},{name:"Fermentation",title:"醱酵槽管理"},{name:"Alarm",title:"警報管理"},{name:"Line",title:"LineBot管理"},{name:"Member",title:"帳號管理"}]},I=()=>{let a=d.itemList,l=[];for(let e of a){let i={icon:e.icon??"fa fa-circle",active:!1,defaultActive:!1};if(e.name&&e.title)i.name=e.name,i.title=e.title,i.type="link",i.active=!0,l.push(i);else if(e.children&&e.children.length>0){i.title=e.title,i.type="sub",i.active=!1;let t=[];for(let n of e.children){let m={active:!1,defaultActive:!1};n.name&&n.title&&(m.name=n.name,m.title=n.title,m.type="link",m.active=!0,t.push(m))}t.length>0&&(i.children=t,l.push(i))}}return l},b=h(()=>c().matched.filter(a=>a.name!="")),v=o("menu",{state:()=>({menuItemList:[],isInit:!1}),getters:{activeMenuStackList(){var i,t,n,m,f,r;let a="Dashboard",l=this.menuItemList.find(s=>s.name==a),e=[];for(let s of this.menuItemList){if(e.length>0)break;if(s.active&&e.push({title:s.title,name:s.name}),s.children){for(let u of s.children)if(u.active){e.push({title:u.title,name:u.name});break}}}if(e.length>0&&e[0].name!=a)e.unshift(l);else if(e.length==0){let s=c();(i=s.meta)!=null&&i.parent?(e=this.getMenuStackList((t=s.meta)==null?void 0:t.parent),e.push({title:(n=s.meta)==null?void 0:n.title,name:s.name}),this.manualActiveMenu((m=s.meta)==null?void 0:m.parent)):(f=s.meta)!=null&&f.title&&(e.push(l),e.push({title:(r=s.meta)==null?void 0:r.title,name:s.name}))}return e},getMenuStackList(){return a=>{let l="Dashboard",e=this.menuItemList.find(t=>t.name==l),i=[];for(let t of this.menuItemList){if(i.length>0)break;if(t.name==a){i.push({title:t.title,name:t.name});break}else if(t.children){for(let n of t.children)if(n.name==a){i.push({title:t.title,name:t.name}),i.push({title:n.title,name:n.name});break}}}return i.length>0&&i[0].name!=l&&i.unshift(e),i}}},actions:{initMenuItemList(){if(!this.isInit){this.isInit=!0,this.menuItemList=I();let a=b.value.pop();a&&a.name!=""&&this.manualActiveMenu(a.name)}},inactiveAllMenuItem(){for(let a of this.menuItemList)if(a.active=!1,a.defaultActive=!1,a.children)for(let l of a.children)l.active=!1,l.defaultActive=!1},manualActiveMenu(a){let l=!1,e=null,i=null;for(let t of this.menuItemList){if(t.name==a){l=!0,e=t;break}if(t.children){for(let n of t.children)if(n.name==a){l=!0,e=t,i=n;break}}if(l)break}if(e){for(let t of this.menuItemList)if(t.active=t==e,t.defaultActive=t==e,t.children)for(let n of t.children)n.active=n==i,n.defaultActive=n==i}}}});export{v as u};
